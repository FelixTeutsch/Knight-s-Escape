// Create Game Manager
let gameManager = new GameManager();
let canvas = new Canvas("canvas");
let player;
let enemy;
let score = 0;

let LOGGER = new Logger(true);

let testMap = [
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["1", "t", "t", "t", "t", "t", "t", "t", "t", "t", "t", "t", "t", "t", "t", "2"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"],
    ["l", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "r"],
    ["l", "0", "0", "0", "0", "0", "0", "┌", "b", "b", "b", "b", "b", "b", "b", "r"],
    ["l", "0", "0", "0", "0", "0", "0", "r", "1", "t", "t", "t", "t", "t", "t", "r"],
    ["l", "0", "0", "0", "0", "0", "0", "r", "l", "0", "0", "0", "0", "0", "0", "r"],
    ["l", "0", "0", "0", "0", "0", "0", "r", "l", "0", "0", "0", "e", "0", "0", "r"],
    ["l", "0", "0", "p", "0", "0", "0", "r", "l", "0", "0", "0", "0", "0", "0", "r"],
    ["3", "b", "b", "b", "b", "b", "b", "4", "3", "b", "b", "b", "b", "b", "b", "4"]
];
let levelMap = [
    ["┌", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "┐"],
    ["║", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "║"],
    ["║", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "║"],
    ["║", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "║"],
    ["║", "0", "0", "0", "0", "0", "0", "0", "0", "□", "0", "0", "0", "c", "x", "║"],
    ["║", "0", "0", "0", "0", "0", "0", "0", "□", "0", "<", "═", "┬", "═", ">", "║"],
    ["║", "0", "0", "p", "0", "0", "0", "0", "0", "0", "0", "0", "║", "0", "0", "║"],
    ["└", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "═", "┴", "═", "═", "┘"]
];

function increaseScore(val) {
    score += val;
    LOGGER.log("New Score:", val);
}

let spriteLoader = new SpriteLoader(testMap);
spriteLoader.loadKeys();
spriteLoader.createLevel();

player.setCurrentAnimation(0, 0);

requestAnimationFrame(gameManager.gameLoop);